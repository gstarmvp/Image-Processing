<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>CP467</title>

    <link rel="stylesheet" type="text/css" media="all" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600">
    <link href="{{ url_for('static', filename='css/site.css') }}" rel='stylesheet' type='text/css' />
    </head>

  <body>
    <div class='container'>
        <h1>CP467 Image Processing Final Project</h1>

        <div class="upload">
            <form action="{{ url_for('upload') }}" method=post enctype=multipart/form-data>
                <input type="file" name="file" class="select-file">
                <br>
                <button type="submit" class="suggested-action" value="Upload">Upload</button>
            </form>
        </div>

        {% with messages = get_flashed_messages() %}
          {% if messages %}
          <ul class=flashes>
              {% for message in messages %}
              <li>{{ message }}</li>
              {% endfor %}
          </ul>
          {% endif %}
        {% endwith %}

        <div class="picture">
            {% if filename %}
              <div class="before">
                  <h2>Before:</h2>
                  <div>{{ filename }}</div>
                  <img src='../static/img/{{ filename }}'>
                  <br><br>

                  <!--Filter-->
                  <h4>Enter Kernel</h4>
                  <form action="{{ url_for('filter') }}" method=post>
                      <input type=text name=k0></input>
                      <input type=text name=k1></input>
                      <input type=text name=k2></input><br>
                      <input type=text name=k3></input>
                      <input type=text name=k4></input>
                      <input type=text name=k5></input><br>
                      <input type=text name=k6></input>
                      <input type=text name=k7></input>
                      <input type=text name=k8></input><br>
                      <input type=hidden name=filename value="{{filename}}"></input>
                      <button type="submit" value="apply">Apply Filter</button>
                  </form>

                  <!--Thinning-->
                  <form action="{{ url_for('thinning') }}" method=post>
                      <input type=hidden name=filename value="{{filename}}"></input>
                      <button type="submit" value="apply">Apply ZS Thinning</button>
                  </form>

                  <!--Vector Img-->
                  <form action="{{ url_for('vector') }}" method=post>
                      <input type=hidden name=filename value="{{filename}}"></input>
                      <button type="submit" value="apply">Get Vector for this Image</button>
                  </form>
              </div>
            {% endif %}

            {% if new_file %}
              <div class="after">
                  <h2>After:</h2>
                  <div>{{ new_file }}</div>
                  <img src='../static/img/{{ new_file }}'>
              </div>
            {% endif %}
        </div>

        {% if img_vector %}
          <div class="vector">
            <h2>Vector for this Image:</h2>
            <div>{{ img_vector }}</div>
          </div>
        {% endif %}
    </div>
  </body>
</html>
